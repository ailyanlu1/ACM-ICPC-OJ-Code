# 2009 Harbin: Gold Mines

## Solution

比较隐蔽的费用流模型。按照如下方法建图：

1. 原图的每个顶点i拆成两个点，新的编号为i,i+1，从i向i+1连一条费用为该顶点的价值，流量为1的边。
2. 枚举所有把有2N个矿等量划分成A,B两部分的方案。A有N个矿，每个人分一个；B有N个矿，每个人也分一个。
3. 图的源点S向位于A集合的矿连费用为0，流量为1的边
4. 位于B集合的矿向图的汇点T连费用为0，流量为1的边
5. 原图中，如果两个顶点x,y之间有边，那么就在新图中加入边(y×2+1,x×2),(x×2+1,y×2)，这些边的费用为0，流量为1。 

设最优答案best=inf，对于每一次划分的方法，求最小费用最大流。当流量与N相等时，更新答案。

这样构图的原理是：

* 每条边的流量为1，保证了原图每个点只能够分配给一个人
* 如果流量与N相等，说明从A集合的每个矿都有道路到达B集合，且这些道路是不会交叉的（因为边流量为1）。
* 从A集合的每个矿都有道路到达B集合的情况下，由于使用的是最小费用最大流算法，因此会选择价值最小的顶点分配给这些人。 

枚举那一步可以使用位运算解决。假设N=4，如果枚举到11110000，那么就表示前四个矿为A集合，后四个矿为B集合。枚举后建图求费用流可更 新答案。枚举时有些情况是重复的，可以加以避免。 
