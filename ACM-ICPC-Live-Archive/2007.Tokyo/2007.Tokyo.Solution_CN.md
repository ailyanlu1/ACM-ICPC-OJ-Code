# 2007 Tokyo

Problem available in:

ACM-ICPC Live Archive: 3882 - 3891

POJ: 3517 - 3526

## Problem D. Lowest Pyramid
(POJ 3520, ACM-ICPC Live Archive 3885)
## Summary
给出平面内的一个三角形，其三个点是P0, P1, P2。让你求一个以这个三角形为底的四面体，使这个四面体的高最低，并满足：

1. 展开四面体其他三个面平面以后，三个顶点P0, P1, P2的坐标的(x, y)必须是整数

2. 且：(x,y)的范围在-100到100之中。

3. 四面体的高不能为0

## Soluution
题型：枚举+计算几何
题目看上去没有任何规律，所以我们想到的方法是：枚举所有合法的情况，求出组成的四面体的高度，找出其中最优质。

题目的坐标范围限定在-100到100以内，这也相当于给了一个枚举的范围。

假设PA是P0P1对应的顶点，PB是P1P2对应的顶点，PC是P2P0对应的顶点。我们发现：如果PA的位置确定了，那么dis(PB, P1)必定与dis(PA, P1)相等，因为他们在四面体里面共享同一条边。如果PA和PB都确定了，那么必定有dis(PC, P0) = dis(PA, p0)，且dis(PC, P2) = dis(PB, P2)，原理相同。

所以不难得出一个基本思路：

1. 枚举符合条件的PA，PA必须要在向量(P0, P1)的顺时针方向侧。这一步没法省，复杂度是200 * 200。

2. 再枚举PB，注意PB必须要在向量P1, P2的顺时针方向侧。且PB必须满足dis(PB, P1)=dis(PA, P1)。这一步很重要，决定了代码运行的效率。有两种枚举方法：
  1. 方法1：枚举PB的x，通过解方程求出PB的y，看看求出来的PB是否满足条件。这是我最初的想法，虽然能AC，但效率不高而且写起来麻烦。
  2. 方法2：从别人那里学回来的。坐标必须是整点是一个很有用的条件。在题目的开始，我们可以先把d=(x^2 + y^2)预处理一遍，把所以满足的(x,y)保存起来。这样我们就可以很快地回答这个问题：哪些点到原点(0,0）的距离为d，且坐标都是整点。于是，给出条件dis(PA, P1)，我们就可以快速知道哪些PB满足这个要求。

3. 最后通过计算求出PC，明显这是一个标准的两圆交点的问题。

求出一种方案以后，我们可以用欧拉四面体公式求出体积。该公式能根据给出的四面体的边的长度求出体积，注意边的顺序。详细请见[Wikipedia关于四面体的介绍](http://en.wikipedia.org/wiki/Tetrahedron)。
