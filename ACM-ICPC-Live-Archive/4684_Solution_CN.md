# 2009 Amritapuri: Love for Pizza

## Solution

题目分两步。第一步就是把所有的点按照角度排序，然后把相同角度的toppings的值合并（因为一刀切下去的时候，相同角度的topping肯定 位于同一块之中）。

第二步就是一个圆周上的最大子段和模型。由于处理圆周问题比较麻烦，因此可以把圆拆开，复制两次，转换成一个序列的，保存为 seq[n*2]。设f(x,y)为普通序列上，[x,y]区间的最大字段和，那么圆周的最大字段和相当于max(f(i,i+n-1)), i = 1 to n。多次询问一个数组的最大子段和可以使用线段树解决。因此使用线段树预处理序列seq[1..2n]后，f(x,y)函数在log(n)时间内查询出所 有的[i,i+n-1]区间的最大子段和。

线段树的解决方法是：线段树节点存储当前区间总和, 当前区间左边连续的最大值, 中间连续的最大值, 右边连续的最大值这四个字段。 
